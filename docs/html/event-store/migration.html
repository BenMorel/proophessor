<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <meta name="HandheldFriendly" content="True"/>
    <title>Migration from v6 to v7</title>
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/cerulean/bootstrap.min.css">
    <link rel="stylesheet"
          href="https://tobiju.github.io/share/prismjs/prism-ghcolors.css"/>
    <link rel="stylesheet"
          href="https://tobiju.github.io/share/prismjs/prism-linenumbers.css"/>
    <style>
        body, html {
            height: 100%;
            padding-top: 36px;
            position: relative;
        }

        img {
            max-width: 100%;
        }

        .page-wrapper {
            min-height: 100%;
            padding-bottom: 170px;
            position: relative;
        }

        /* Header Section */
        header {
            background: white;
            color: black;
            font-size: 16px;
            font-weight: 300;
        }

        h1:first-child {
            margin-top: 0;
        }

        /* anchor link will be displayed after the static top nav */
        h1:before,
        h2:before,
        h3:before,
        h4:before,
        h5:before,
        h6:before {
            display: block;
            content: " ";
            margin-top: -64px;
            height: 64px;
            visibility: hidden;
        }

        .navbar-brand {
            padding: 0;
        }

        .navbar-brand img {
            max-height: 100%;
        }

        /* Content Section */
        #content {
            margin-bottom: 17px;
            font-size: 17px;
            min-height: 200px;
        }

        .breadcrumb {
            position: relative;
            z-index: 999;
        }

        .links {
            background: #f8f8f8;
            border-top: 1px solid #e5e5e5;
            border-bottom: 1px solid #e5e5e5;
            padding: 16px 0;
        }

        .links .prev {
            text-align: left;
        }

        .links .parent {
            text-align: center;
        }

        .links .next {
            text-align: right;
        }

        /* TOC */
        .list-toc .list-group-item {
            background: 0 none;
            position: relative;
            font-weight: bold;
            padding: 0;
        }

        .list-toc .list-group-item.level-2 {
            padding-left: 20px;
        }

        .list-toc .list-group-item.level-3 {
            padding-left: 40px;
        }

        .list-toc .list-group-item.level-4 {
            padding-left: 20px;
        }

        .list-toc .list-group-item .row {
            padding: 7px 0;
        }

        .list-toc .list-group-item .text-number {
            padding-left: 10px;
        }

        .list-toc .list-toc-nested .list-group-item {
            font-weight: normal;
            border: 0 none !important;
        }

        .list-toc .list-toc-nested {
            margin-bottom: 0;
            padding-bottom: 10px;
        }

        .list-toc .list-group-item .bbt-toc-toggle {
            display: block;
            position: absolute;
            top: 5px;
            right: 10px;
            font-weight: normal;
        }
        .list-toc .list-group-item .bbt-toc-toggle:before {
            content: "";
            display: block;
        }
        .list-toc .list-group-item .bbt-toc-toggle.collapsed:before {
            content: "";
            display: block;
        }

        .list-toc > li:nth-child(2n+1) {
            background: rgba(0, 0, 0, 0.03);
        }

        .bbt-theme-cyborg .list-toc > li:nth-child(2n+1),
        .bbt-theme-darkly .list-toc > li:nth-child(2n+1),
        .bbt-theme-slate .list-toc > li:nth-child(2n+1),
        .bbt-theme-superhero .list-toc > li:nth-child(2n+1) {
            background: rgba(255, 255, 255, 0.05);
        }

        .list-toc .list-group-item {
            border-bottom: 0 none;
            border-left: 0 none;
            border-right: 0 none;
            font-size: inherit;
        }

        .list-toc .list-group-item:first-child {
            border-top-right-radius: 0;
            border-top-left-radius: 0;
        }

        .list-toc .list-group-item:last-child {
            border-bottom-right-radius: 0;
            border-bottom-left-radius: 0;
        }

        /* Left navigation */
        .nav-left ul li a {
            padding-top: 3px;
            padding-bottom: 3px;
            border-left: 1px solid transparent;
        }
        .nav-left ul li.active a,
        .nav-left ul li a:hover {
            background: none !important;
            color: inherit;
            border-color: inherit;
        }

        .affix {
            top: 60px;
        }

        .badge {
            border-radius: 4px;
            padding: 5px;
        }

        /* Footer Section */
        footer {
            color: black;
            background: white;
            width: 100%;
            position: absolute;
            bottom: 0;
        }

        footer #copyright {
            padding: 30px;
            text-align: center;
            color: #444;
        }

        footer #copyright p {
            margin: 0;
        }

        footer #copyright span a {
            color: white;
        }

        .prooph-logo {
            float: left;
            margin-left: 8px;
            margin-right: 8px;
            transition-timing-function: ease-in-out;
            transition: all 5s;
            height: 50px;
            padding: 5px;
        }

        .prooph-logo:hover {
            transition: all .7s;
            transition-timing-function: ease-out;
            transform: rotate(360deg);
        }

        /* Top Navigation */
        @media (max-width: 767px) {
            ul.navbar-nav {
                margin: 0 -15px
            }

            ul.navbar-nav li {
                border-radius: 0;
            }

            ul.navbar-nav li ul {
                background: rgba(255, 255, 255, 0.2);
                border: none;
                border-radius: 0;
                box-shadow: none;
                display: block;
                float: none;
                left: auto;
                padding: 0;
                position: static;
            }

            ul.navbar-nav li ul li a {
                padding: 8px 30px;
            }

            ul.navbar-nav li ul li ul li a {
                padding: 6px 40px;
            }
        }

        @media (min-width: 768px) {

            ul.navbar-nav li {
                display: block;
                position: relative;
                float: left;
            }

            ul.navbar-nav li ul {
                display: none;
            }

            ul.navbar-nav li a {
                display: block;
            }

            ul.navbar-nav li:hover > ul {
                display: block;
                position: absolute;
            }

            ul.navbar-nav li:hover li {
                float: none;
            }

            ul.navbar-nav ul ul {
                left: 100%;
                top: 0;
            }
        }
    </style>
    </head>
    <body data-spy="scroll" data-target="#sideNav" data-offset="50" class="bbt-theme-cerulean">
    <div class="page-wrapper">
        <header>
    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#js-navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
                    </div>

        <div class="collapse navbar-collapse" id="js-navbar-collapse">
            
    
    <ul class="nav navbar-nav">
        <a href="/docs/html/">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="prooph-logo">
                <defs>
                    <style>
                        .cls-1{fill:#04a1b0;}.cls-2{fill:#26896c;}.cls-3{fill:#eeca50;}.cls-4{fill:#eb6842;}.cls-5{fill:#cc3340;}.cls-6{fill:#715671;}
                    </style>
                </defs>
                <title>prooph-logo</title>
                <g id="artwork">
                    <g id="Layer_5" data-name="Layer 5">
                        <path class="cls-1"
                              d="M57.22,17,67.84,35.43a1.77,1.77,0,0,0,1.53.89h61.25a1.77,1.77,0,0,0,1.53-.89L142.78,17a1.77,1.77,0,0,0-1.53-2.66H58.76A1.77,1.77,0,0,0,57.22,17Z"/>
                        <path class="cls-2"
                              d="M29.54,94.68l30.63-53a1.77,1.77,0,0,0,0-1.77L49.55,21.48a1.77,1.77,0,0,0-3.07,0L5.24,92.91a1.77,1.77,0,0,0,1.53,2.66H28A1.77,1.77,0,0,0,29.54,94.68Z"/>
                        <path class="cls-3"
                              d="M60.16,158.36l-30.63-53a1.77,1.77,0,0,0-1.53-.89H6.78a1.77,1.77,0,0,0-1.53,2.66l41.24,71.43a1.77,1.77,0,0,0,3.07,0l10.61-18.38A1.77,1.77,0,0,0,60.16,158.36Z"/>
                        <path class="cls-4"
                              d="M130.63,163.68H69.37a1.77,1.77,0,0,0-1.53.89L57.22,183a1.77,1.77,0,0,0,1.53,2.66h82.48a1.77,1.77,0,0,0,1.53-2.66l-10.61-18.38A1.77,1.77,0,0,0,130.63,163.68Z"/>
                        <path class="cls-5"
                              d="M170.46,105.32l-30.63,53a1.77,1.77,0,0,0,0,1.77l10.61,18.38a1.77,1.77,0,0,0,3.07,0l41.24-71.43a1.77,1.77,0,0,0-1.53-2.66H172A1.77,1.77,0,0,0,170.46,105.32Z"/>
                        <path class="cls-6"
                              d="M139.84,41.64l30.63,53a1.77,1.77,0,0,0,1.53.89h21.23a1.77,1.77,0,0,0,1.53-2.66L153.52,21.48a1.77,1.77,0,0,0-3.07,0L139.84,39.86A1.77,1.77,0,0,0,139.84,41.64Z"/>
                    </g>
                </g>
            </svg>
        </a>
                        <li>
    <a href="/docs/html/overview/">Overview</a>
    
    <ul class="dropdown-menu">
        <a href="/docs/html/overview/">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="prooph-logo">
                <defs>
                    <style>
                        .cls-1{fill:#04a1b0;}.cls-2{fill:#26896c;}.cls-3{fill:#eeca50;}.cls-4{fill:#eb6842;}.cls-5{fill:#cc3340;}.cls-6{fill:#715671;}
                    </style>
                </defs>
                <title>prooph-logo</title>
                <g id="artwork">
                    <g id="Layer_5" data-name="Layer 5">
                        <path class="cls-1"
                              d="M57.22,17,67.84,35.43a1.77,1.77,0,0,0,1.53.89h61.25a1.77,1.77,0,0,0,1.53-.89L142.78,17a1.77,1.77,0,0,0-1.53-2.66H58.76A1.77,1.77,0,0,0,57.22,17Z"/>
                        <path class="cls-2"
                              d="M29.54,94.68l30.63-53a1.77,1.77,0,0,0,0-1.77L49.55,21.48a1.77,1.77,0,0,0-3.07,0L5.24,92.91a1.77,1.77,0,0,0,1.53,2.66H28A1.77,1.77,0,0,0,29.54,94.68Z"/>
                        <path class="cls-3"
                              d="M60.16,158.36l-30.63-53a1.77,1.77,0,0,0-1.53-.89H6.78a1.77,1.77,0,0,0-1.53,2.66l41.24,71.43a1.77,1.77,0,0,0,3.07,0l10.61-18.38A1.77,1.77,0,0,0,60.16,158.36Z"/>
                        <path class="cls-4"
                              d="M130.63,163.68H69.37a1.77,1.77,0,0,0-1.53.89L57.22,183a1.77,1.77,0,0,0,1.53,2.66h82.48a1.77,1.77,0,0,0,1.53-2.66l-10.61-18.38A1.77,1.77,0,0,0,130.63,163.68Z"/>
                        <path class="cls-5"
                              d="M170.46,105.32l-30.63,53a1.77,1.77,0,0,0,0,1.77l10.61,18.38a1.77,1.77,0,0,0,3.07,0l41.24-71.43a1.77,1.77,0,0,0-1.53-2.66H172A1.77,1.77,0,0,0,170.46,105.32Z"/>
                        <path class="cls-6"
                              d="M139.84,41.64l30.63,53a1.77,1.77,0,0,0,1.53.89h21.23a1.77,1.77,0,0,0,1.53-2.66L153.52,21.48a1.77,1.77,0,0,0-3.07,0L139.84,39.86A1.77,1.77,0,0,0,139.84,41.64Z"/>
                    </g>
                </g>
            </svg>
        </a>
                        <li>
    <a href="/docs/html/overview/prooph-in-a-nutshell.html">prooph in a nutshell</a>

    </li>
                        <li>
    <a href="/docs/html/overview/components.html">prooph components</a>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/docs/html/service-bus/">Service Bus</a>
    
    <ul class="dropdown-menu">
        <a href="/docs/html/service-bus/">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="prooph-logo">
                <defs>
                    <style>
                        .cls-1{fill:#04a1b0;}.cls-2{fill:#26896c;}.cls-3{fill:#eeca50;}.cls-4{fill:#eb6842;}.cls-5{fill:#cc3340;}.cls-6{fill:#715671;}
                    </style>
                </defs>
                <title>prooph-logo</title>
                <g id="artwork">
                    <g id="Layer_5" data-name="Layer 5">
                        <path class="cls-1"
                              d="M57.22,17,67.84,35.43a1.77,1.77,0,0,0,1.53.89h61.25a1.77,1.77,0,0,0,1.53-.89L142.78,17a1.77,1.77,0,0,0-1.53-2.66H58.76A1.77,1.77,0,0,0,57.22,17Z"/>
                        <path class="cls-2"
                              d="M29.54,94.68l30.63-53a1.77,1.77,0,0,0,0-1.77L49.55,21.48a1.77,1.77,0,0,0-3.07,0L5.24,92.91a1.77,1.77,0,0,0,1.53,2.66H28A1.77,1.77,0,0,0,29.54,94.68Z"/>
                        <path class="cls-3"
                              d="M60.16,158.36l-30.63-53a1.77,1.77,0,0,0-1.53-.89H6.78a1.77,1.77,0,0,0-1.53,2.66l41.24,71.43a1.77,1.77,0,0,0,3.07,0l10.61-18.38A1.77,1.77,0,0,0,60.16,158.36Z"/>
                        <path class="cls-4"
                              d="M130.63,163.68H69.37a1.77,1.77,0,0,0-1.53.89L57.22,183a1.77,1.77,0,0,0,1.53,2.66h82.48a1.77,1.77,0,0,0,1.53-2.66l-10.61-18.38A1.77,1.77,0,0,0,130.63,163.68Z"/>
                        <path class="cls-5"
                              d="M170.46,105.32l-30.63,53a1.77,1.77,0,0,0,0,1.77l10.61,18.38a1.77,1.77,0,0,0,3.07,0l41.24-71.43a1.77,1.77,0,0,0-1.53-2.66H172A1.77,1.77,0,0,0,170.46,105.32Z"/>
                        <path class="cls-6"
                              d="M139.84,41.64l30.63,53a1.77,1.77,0,0,0,1.53.89h21.23a1.77,1.77,0,0,0,1.53-2.66L153.52,21.48a1.77,1.77,0,0,0-3.07,0L139.84,39.86A1.77,1.77,0,0,0,139.84,41.64Z"/>
                    </g>
                </g>
            </svg>
        </a>
                        <li>
    <a href="/docs/html/service-bus/intro.html">PSB - ProophServiceBus</a>

    </li>
                        <li>
    <a href="/docs/html/service-bus/overview.html">PSB Overview</a>

    </li>
                        <li>
    <a href="/docs/html/service-bus/message_bus.html">Message Buses</a>

    </li>
                        <li>
    <a href="/docs/html/service-bus/plugins.html">PSB Plugins</a>

    </li>
                        <li>
    <a href="/docs/html/service-bus/async_message_producer.html">Async Message Producer</a>

    </li>
                        <li>
    <a href="/docs/html/service-bus/factories.html">Interop + Factories</a>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/docs/html/event-store/">Event Store</a>
    
    <ul class="dropdown-menu">
        <a href="/docs/html/event-store/">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="prooph-logo">
                <defs>
                    <style>
                        .cls-1{fill:#04a1b0;}.cls-2{fill:#26896c;}.cls-3{fill:#eeca50;}.cls-4{fill:#eb6842;}.cls-5{fill:#cc3340;}.cls-6{fill:#715671;}
                    </style>
                </defs>
                <title>prooph-logo</title>
                <g id="artwork">
                    <g id="Layer_5" data-name="Layer 5">
                        <path class="cls-1"
                              d="M57.22,17,67.84,35.43a1.77,1.77,0,0,0,1.53.89h61.25a1.77,1.77,0,0,0,1.53-.89L142.78,17a1.77,1.77,0,0,0-1.53-2.66H58.76A1.77,1.77,0,0,0,57.22,17Z"/>
                        <path class="cls-2"
                              d="M29.54,94.68l30.63-53a1.77,1.77,0,0,0,0-1.77L49.55,21.48a1.77,1.77,0,0,0-3.07,0L5.24,92.91a1.77,1.77,0,0,0,1.53,2.66H28A1.77,1.77,0,0,0,29.54,94.68Z"/>
                        <path class="cls-3"
                              d="M60.16,158.36l-30.63-53a1.77,1.77,0,0,0-1.53-.89H6.78a1.77,1.77,0,0,0-1.53,2.66l41.24,71.43a1.77,1.77,0,0,0,3.07,0l10.61-18.38A1.77,1.77,0,0,0,60.16,158.36Z"/>
                        <path class="cls-4"
                              d="M130.63,163.68H69.37a1.77,1.77,0,0,0-1.53.89L57.22,183a1.77,1.77,0,0,0,1.53,2.66h82.48a1.77,1.77,0,0,0,1.53-2.66l-10.61-18.38A1.77,1.77,0,0,0,130.63,163.68Z"/>
                        <path class="cls-5"
                              d="M170.46,105.32l-30.63,53a1.77,1.77,0,0,0,0,1.77l10.61,18.38a1.77,1.77,0,0,0,3.07,0l41.24-71.43a1.77,1.77,0,0,0-1.53-2.66H172A1.77,1.77,0,0,0,170.46,105.32Z"/>
                        <path class="cls-6"
                              d="M139.84,41.64l30.63,53a1.77,1.77,0,0,0,1.53.89h21.23a1.77,1.77,0,0,0,1.53-2.66L153.52,21.48a1.77,1.77,0,0,0-3.07,0L139.84,39.86A1.77,1.77,0,0,0,139.84,41.64Z"/>
                    </g>
                </g>
            </svg>
        </a>
                        <li>
    <a href="/docs/html/event-store/intro.html">ProophEventStore</a>

    </li>
                        <li>
    <a href="/docs/html/event-store/event_store.html">Prooph Event Store</a>

    </li>
                        <li>
    <a href="/docs/html/event-store/projections.html">Projections</a>

    </li>
                        <li>
    <a href="/docs/html/event-store/upcasting.html">Upcasting</a>

    </li>
                        <li>
    <a href="/docs/html/event-store/interop_factories.html">Interop Factories</a>

    </li>
                        <li>
    <a href="/docs/html/event-store/migration.html">Migration from v6 to v7</a>

    </li>
            </ul>

    </li>
                        <li>
    <a href="/docs/html/event-sourcing/">Event Sourcing</a>
    
    <ul class="dropdown-menu">
        <a href="/docs/html/event-sourcing/">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" class="prooph-logo">
                <defs>
                    <style>
                        .cls-1{fill:#04a1b0;}.cls-2{fill:#26896c;}.cls-3{fill:#eeca50;}.cls-4{fill:#eb6842;}.cls-5{fill:#cc3340;}.cls-6{fill:#715671;}
                    </style>
                </defs>
                <title>prooph-logo</title>
                <g id="artwork">
                    <g id="Layer_5" data-name="Layer 5">
                        <path class="cls-1"
                              d="M57.22,17,67.84,35.43a1.77,1.77,0,0,0,1.53.89h61.25a1.77,1.77,0,0,0,1.53-.89L142.78,17a1.77,1.77,0,0,0-1.53-2.66H58.76A1.77,1.77,0,0,0,57.22,17Z"/>
                        <path class="cls-2"
                              d="M29.54,94.68l30.63-53a1.77,1.77,0,0,0,0-1.77L49.55,21.48a1.77,1.77,0,0,0-3.07,0L5.24,92.91a1.77,1.77,0,0,0,1.53,2.66H28A1.77,1.77,0,0,0,29.54,94.68Z"/>
                        <path class="cls-3"
                              d="M60.16,158.36l-30.63-53a1.77,1.77,0,0,0-1.53-.89H6.78a1.77,1.77,0,0,0-1.53,2.66l41.24,71.43a1.77,1.77,0,0,0,3.07,0l10.61-18.38A1.77,1.77,0,0,0,60.16,158.36Z"/>
                        <path class="cls-4"
                              d="M130.63,163.68H69.37a1.77,1.77,0,0,0-1.53.89L57.22,183a1.77,1.77,0,0,0,1.53,2.66h82.48a1.77,1.77,0,0,0,1.53-2.66l-10.61-18.38A1.77,1.77,0,0,0,130.63,163.68Z"/>
                        <path class="cls-5"
                              d="M170.46,105.32l-30.63,53a1.77,1.77,0,0,0,0,1.77l10.61,18.38a1.77,1.77,0,0,0,3.07,0l41.24-71.43a1.77,1.77,0,0,0-1.53-2.66H172A1.77,1.77,0,0,0,170.46,105.32Z"/>
                        <path class="cls-6"
                              d="M139.84,41.64l30.63,53a1.77,1.77,0,0,0,1.53.89h21.23a1.77,1.77,0,0,0,1.53-2.66L153.52,21.48a1.77,1.77,0,0,0-3.07,0L139.84,39.86A1.77,1.77,0,0,0,139.84,41.64Z"/>
                    </g>
                </g>
            </svg>
        </a>
                        <li>
    <a href="/docs/html/event-sourcing/intro.html">ProophEventSourcing</a>

    </li>
                        <li>
    <a href="/docs/html/event-sourcing/repositories.html">Working with Repositories</a>

    </li>
                        <li>
    <a href="/docs/html/event-sourcing/snapshots.html">Snapshots</a>

    </li>
                        <li>
    <a href="/docs/html/event-sourcing/inheritance.html">Inheritance with Aggregate Roots</a>

    </li>
                        <li>
    <a href="/docs/html/event-sourcing/interop_factories.html">Interop Factories</a>

    </li>
                        <li>
    <a href="/docs/html/event-sourcing/migration.html">Migration from v4 to v5</a>

    </li>
            </ul>

    </li>
            </ul>

        </div>
    </div>
</nav>
</header>
<div class="container">
    <ol class="breadcrumb">
                        <li><a href="/docs/html/">prooph components documentation</a></li>
                                <li><a href="/docs/html/event-store/">Event Store</a></li>
                                <li class="active">Migration from v6 to v7</li>
            </ol>
    <div class="row">

                <div class="col-md-3">
            <nav class="nav-left hidden-xs hidden-sm" id="sideNav">
    <ul class="nav nav-stacked" data-spy="affix" data-offset-top="59" role="tablist">
                                <li>
                <a href="#3-6" title="Migration&#x20;from&#x20;v6&#x20;to&#x20;v7">Migration from v6 to v7</a>
            </li>
                                <li>
                <a href="#3-6-1" title="Moved&#x20;classes">Moved classes</a>
            </li>
                                <li>
                <a href="#3-6-2" title="Interfaces&#x20;VS&#x20;adapters">Interfaces VS adapters</a>
            </li>
                                <li>
                <a href="#3-6-3" title="ActionEventEmitterEventStore">ActionEventEmitterEventS...</a>
            </li>
                                <li>
                <a href="#3-6-4" title="Plugins">Plugins</a>
            </li>
                                <li>
                <a href="#3-6-5" title="Interaction&#x20;with&#x20;the&#x20;event&#x20;store">Interaction with the eve...</a>
            </li>
                                <li>
                <a href="#3-6-6" title="DB&#x20;migrations">DB migrations</a>
            </li>
            </ul>
</nav>
        </div>
                <div class="col-md-9">
<div id="section-main"><h1 id="3-6">Migration from v6 to v7</h1>
<h2 id="3-6-1">Moved classes</h2>
<p>The <code>Prooph\Snapshot\*</code> classes are now moved to its own repository <a href="https://github.com/prooph/snapshot-store">SnapshotStore</a>.</p>
<p>The <code>Prooph\Aggregate\*</code> classes are now moved into the <a href="https://github.com/prooph/event-sourcing/">event-sourcing</a> repository.</p>
<h2 id="3-6-2">Interfaces VS adapters</h2>
<p>The event store now ships with a <code>Prooph\EventStore\ReadOnlyEventStore</code> and a <code>Prooph\EventStore\EventStore</code> interface.
No event store adapters exist any more, instead there are different implementations of an event store.</p>
<h2 id="3-6-3">ActionEventEmitterEventStore</h2>
<p>In order to use action events like in v6, you need to wrap your event store.</p>
<pre><code class="language-php">$eventStore = new ActionEventEmitterEventStore($eventStore);
</code></pre>
<p>or</p>
<pre><code class="language-php">$eventStore = new TransactionalActionEventEmitterEventStore($eventStore);
</code></pre>
<p>Also there are no more <code>.pre</code> and <code>.post</code> commit hooks any more, instead this is handled with different priorities now.</p>
<h2 id="3-6-4">Plugins</h2>
<p>Instead of calling</p>
<pre><code class="language-php">$plugin-&gt;setUp($eventStore);
</code></pre>
<p>you now need to call</p>
<pre><code class="language-php">$plugin-&gt;attachToEventStore($eventStore);
</code></pre>
<h2 id="3-6-5">Interaction with the event store</h2>
<p>If you are using the event-store together with the <a href="https://github.com/prooph/event-sourcing/">event-sourcing</a> component,
most stuff is pretty much unchanged for you, as you don't interact with the event store directly (this is done by the
event-sourcing component).</p>
<p>If you are making calls to the event store yourself, take a look at the event_store docs on how the new usage is.</p>
<h2 id="3-6-6">DB migrations</h2>
<p>If you are using v6 with MySQL (using doctrine adpater) and you want to switch to v7 with MySQL (using pdo-event-store),
you need to upgrade your database before you do this (same for other db vendors of course). The way events are
persisted have changed and you cannot simply update your source code to make this change. You need to write a migration
script, take the database offline, perform the migration and go back online.</p>
<p>Things to do to migrate:</p>
<ul>
<li>Read all events</li>
<li>Update event metadata</li>
<li>Persist the event back to a new stream created with v7</li>
</ul>
<p>This would need to be done for all event streams.</p>
<p>As this is a very tough job, we don't provide any migration script currently and for some applications a downtime is not
acceptable, then v7 might not be the right choice for you, use it when you can take the application offline for a while
and you can perform the db migration or wait with v7 usage, until you start a new project.</p>
<p>We will support v6 series with bugfixes at least for a year (until mid 2018).</p>
</div>        </div>
    </div>
</div>

<footer>
    <div class="links">
        <div class="container">
            <div class="row">
                <div class="prev col-xs-6">
                                            <a href="/docs/html/event-store/interop_factories.html">Previous</a>                                    </div>
                <div class="next col-xs-6">
                                            <a href="/docs/html/event-sourcing/">Next</a>                                    </div>
            </div>
        </div>
    </div>
    <div id="copyright">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p>Powered by <a href="https://github.com/prooph/bookdown-template" title="Visit project to generate your own docs">Bookdown Bootswatch Templates</a>.</p>
                </div>
            </div>
        </div>
    </div>
</footer>
    </div>
    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
            integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
            crossorigin="anonymous"></script>
    <script src="https://prooph.github.io/share/prismjs/main.js"></script>
    <script src="https://prooph.github.io/share/prismjs/prism.js"></script>
</body>
</html>
